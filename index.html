<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Quiz Shopera</title>
  <style>
    #quiz { max-width:600px; margin:auto; font-family:Arial,sans-serif }
    .question { display: none; opacity: 0; transition: opacity 0.3s ease; }
    .question.active { display: block; opacity: 1; }
    .answer {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background-color: #f5f5f5;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .answer:hover { background-color: #e0e0e0; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h2 { text-align:center; animation: fadeIn 1s ease-in-out; }
    #result { display: none; max-width:600px; margin:50px auto; text-align:center; font-family:Arial,sans-serif; }
    #result img { max-width:200px; margin-bottom:20px; }
    #result .answer { margin: 10px auto; width: auto; padding: 10px 20px; }
  </style>
</head>
<body>
  <div id="quiz">
    <h2>Znajdź idealnego laptopa</h2>

    <div id="question1" class="question active">
      <p><strong>1. Wielkość ekranu</strong></p>
      <button type="button" class="answer" data-step="1" data-value="a">Mała (do 13 cali)</button>
      <button type="button" class="answer" data-step="1" data-value="b">Średnia (okolice 14 cali)</button>
      <button type="button" class="answer" data-step="1" data-value="c">Duża (15 i więcej)</button>
    </div>

    <div id="question2" class="question">
      <p><strong>2. Przeznaczenie</strong></p>
      <button type="button" class="answer" data-step="2" data-value="a">Wydajność i gry</button>
      <button type="button" class="answer" data-step="2" data-value="b">Biuro i dom</button>
    </div>

    <div id="question3" class="question">
      <p><strong>3. Budżet</strong></p>
      <button type="button" class="answer" data-step="3" data-value="a">Okolice 500&nbsp;zł</button>
      <button type="button" class="answer" data-step="3" data-value="b">Okolice 1000&nbsp;zł</button>
      <button type="button" class="answer" data-step="3" data-value="c">Okolice 1500&nbsp;zł</button>
    </div>
  </div>

  <div id="result">
    <img src="https://kompre.pl/img/logo@2x.png" alt="Kompre logo">
    <div>
      <button id="btn-result" type="button" class="answer">Zobacz wyniki</button>
      <button id="btn-restart" type="button" class="answer">Powtórz quiz</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const answers = {};

      document.querySelectorAll('.answer').forEach(btn => {
        btn.type = 'button';
        btn.addEventListener('click', e => {
          e.preventDefault();
          e.stopPropagation();

          const step = parseInt(btn.dataset.step, 10);
          if (step) {
            answers[step] = btn.dataset.value;
            const current = document.getElementById('question' + step);
            current.classList.remove('active');
            current.style.display = 'none';
            if (step < 3) {
              const next = document.getElementById('question' + (step + 1));
              next.style.display = 'block';
              setTimeout(() => next.classList.add('active'), 10);
            } else {
              goToResults();
            }
          }
        });
      });
    });

    function goToResults() {
      const urlMap = {
        'a_a_a': 'https://kompre.pl/laptopy/1/default/1/f_at_800_2373/1/f_at_800_2436/1/f_at_800_2510/1/f_at_816_2482/1/f_at_816_2496/1/f_at_816_2414/1/f_at_816_2676/1/f_at_816_2428/1/priceto/650/',
        'a_a_b': 'https://kompre.pl/laptopy/1/default/1/f_at_800_2373/1/f_at_800_2436/1/f_at_800_2510/1/f_at_816_2482/1/f_at_816_2496/1/f_at_816_2414/1/f_at_816_2676/1/f_at_816_2428/1/pricefrom/700/priceto/1300/',
        'a_a_c': 'https://kompre.pl/laptopy/1/default/1/f_at_800_2373/1/f_at_800_2436/1/f_at_800_2510/1/f_at_816_2482/1/f_at_816_2496/1/f_at_816_2414/1/f_at_816_2676/1/f_at_816_2428/1/pricefrom/1300/',
        'a_b_a': 'https://kompre.pl/laptopy/1/default/1/f_at_800_2373/1/f_at_800_2507/1/f_at_800_2578/1/f_at_816_2482/1/f_at_816_2496/1/f_at_816_2414/1/f_at_816_2676/1/f_at_816_2428/1/priceto/650/',
        'a_b_b': '', 'a_b_c': '',
        'b_a_a': '', 'b_a_b': '', 'b_a_c': '',
        'b_b_a': '', 'b_b_b': '', 'b_b_c': '',
        'c_a_a': '', 'c_a_b': '', 'c_a_c': '',
        'c_b_a': '', 'c_b_b': '', 'c_b_c': ''
      };
      const key = `${answers[1]}_${answers[2]}_${answers[3]}`;
      const target = urlMap[key] || 'https://kompre.pl/laptopy';

      // Pokaż ekran z przyciskami
      document.getElementById('quiz').style.display = 'none';
      const res = document.getElementById('result');
      res.style.display = 'block';

      // Przycisk otwierający wyniki w nowej karcie
      document.getElementById('btn-result').addEventListener('click', () => {
        window.open(target, '_blank');
      });
      // Przycisk restartu quizu
      document.getElementById('btn-restart').addEventListener('click', () => {
        location.reload();
      });
    }
  </script>
</body>
</html>
